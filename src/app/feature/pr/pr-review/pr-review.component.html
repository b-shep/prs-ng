
<app-menu></app-menu>
<div class='component-content'>
  <div class='left-half'>
    <span class='component-title'>{{title}}</span>
    <span><a routerLink='/pr/create'>
        <img id='createnew' width='20' height='20' src='assets/add-icon.png' title='Add New'></a>
    </span>
  </div>
</div>
<div *ngIf='revCheck'>
  <p *ngIf='prs.length==0'>No Available Purhcase Requests for Approval</p>
  <!-- table table-sm = bootstrap -->
  <table class='table table-sm' *ngIf='prs.length > 0'>
    <tr>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Id</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>User</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Description</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Justification</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Date Needed</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Delivery Mode</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Status</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Total</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Submitted Date</u></a></th>
      <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Action</u></a></th>
    </tr>
    <tr *ngFor='let pr of prs; let i = index'>
      <td>{{ pr.id }}</td>
      <td>{{ pr.user.userName }}</td>
      <td>{{ pr.description }}</td>
      <td>{{ pr.justification }}</td>
      <td>{{ pr.dateNeeded }}</td>
      <td>{{ pr.deliveryMode }}</td>
      <td>{{ pr.status }}</td>
      <td>{{ pr.total }}</td>
      <td>{{ pr.submittedDate }}</td>
      <td class='actions' style="display: inline-flex">
          <button (click)='approve(i)' class="btn btn-default" style="width:20; height:20; padding:0px;"><img style='margin-left: 10px' src='assets/approve.jpg' width='20' height='20' title='Approve'></button>
          <button (click)='reasonReject(i)' class="btn btn-default" style="width:20; height:20; padding:0px;"><img style='margin-left: 10px' src='assets/reject.jpg' width='20' height='20' title='Reject'></button>
          <button (click)='lines(i)' class="btn btn-default" style="width:20; height:20; padding:0px;"><img style='margin-left: 10px' src='assets/lines.png' width='20' height='20' title='Lines'></button>
      </td>
      <div>
        
        <input style='width:100%;' *ngIf='pr.reasonForRejection=="change"' [(ngModel)]='reason' name = 'ReasonForRejection' type="text" class="form-control col-sm-6" id="userfirstname" aria-describedby="fnameHelp" placeholder="ReasonForRejection"> 
        <button *ngIf='pr.reasonForRejection=="change"' (click)='reject(i)'>Reject</button>
      </div>
    </tr>
  </table>
</div>